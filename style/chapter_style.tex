% Description: This file contains the chapter style for the document.
% Main idea taken from: http://www.ebookation.com/wp-content/uploads/2010/03/memoirchapstyles.pdf
% Edited by VCastor

% Prevents the marking of the headers in uppercase -> \newcommand*{\nouppercaseheads}{\let\memUChead\relax}  
\nouppercaseheads % This command is defined in the memoir class

% -------------
% Chapter style

\newsavebox{\ChpNumBox}
\makeatletter
\newcommand*{\thickhrulefill}{
% \leavevmode\begingroup\color{azul!60}\leaders\hrule height 1\p@ \hfill \endgroup\kern \z@} % Just the line
\leavevmode\color{azul!60}\leaders\hrule height 1\p@ \hfill \kern \z@} % The line and the chapter name
\newcommand*\BuildChpNum[2]{
  \begin{tabular}[t]{@{}c@{}}
    \makebox[0pt][c]{#1\strut} \\ [.5ex]
    \colorbox{azul!60}{
    \rule[-10em]{0pt}{0pt}
    \rule{1ex}{0pt}\color{white}#2\strut % Number of the chapter
    \rule{1ex}{0pt}}
  \end{tabular}}
\makechapterstyle{BlueBox}{
  \renewcommand{\chapnamefont}{\large\scshape\color{azul!60}} % Chapter / Appendix
  \renewcommand{\chapnumfont}{\Huge\bfseries}
  \renewcommand{\chaptitlefont}{\raggedright\Huge\bfseries}
  \setlength{\beforechapskip}{20pt}
  \setlength{\midchapskip}{26pt}
  \setlength{\afterchapskip}{40pt}
  \renewcommand{\printchaptername}{}
  \renewcommand{\chapternamenum}{}
  \renewcommand{\printchapternum}{
    \sbox{\ChpNumBox}{
      \BuildChpNum{\chapnamefont\@chapapp} % Name of the chapter
      {\chapnumfont\thechapter}}}
  \renewcommand{\printchapternonum}{
    \sbox{\ChpNumBox}{
      \BuildChpNum{\chapnamefont\vphantom{\@chapapp}}
      {\chapnumfont\hphantom{\thechapter}}}}
  \renewcommand{\afterchapternum}{}
  \renewcommand{\printchaptertitle}[1]{
    \usebox{\ChpNumBox}\hfill
    \parbox[t]{\hsize-\wd\ChpNumBox-1em}{
    \vspace{\midchapskip} % Space between the number and the title
    \thickhrulefill\par
    \chaptitlefont ##1\par}}
}
\chapterstyle{BlueBox}

